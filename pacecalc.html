<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Pace Calculator</title>

<link rel="manifest" href="./manifest.json">
<link rel="icon" href="./iplogo.png">
<link rel="apple-touch-icon" href="./iplogo.png">
<meta name="theme-color" content="#c0c0c0">
<meta name="apple-mobile-web-app-capable" content="yes">

<style>
:root{
  --bg:#c0c0c0;
  --panel:#c0c0c0;
  --border-dark:#404040;
  --border-light:#ffffff;
  --border-mid:#808080;
  --field:#ffffff;
  --track:#b0b0b0;
  --knob:#d8d8d8;
}

*{box-sizing:border-box}

body{
  margin:0;
  min-height:100vh;
  background:var(--bg);
  font-family:"MS Sans Serif", Tahoma, sans-serif;
  display:flex;
  justify-content:center;
  align-items:center;
  padding:16px;
}

.win95{
  width:min(520px,100%);
  background:var(--panel);
  border:2px solid;
  border-color:var(--border-light) var(--border-dark) var(--border-dark) var(--border-light);
  box-shadow:1px 1px 0 #000;
}

.titlebar{
  padding:10px 12px;
  background:#a0a0a0;
  border-bottom:2px solid var(--border-mid);
  font-weight:bold;
  font-size:14px;
}

.content{padding:14px}

.group{
  padding:12px;
  margin-bottom:12px;
  border:2px solid;
  border-color:var(--border-light) var(--border-dark) var(--border-dark) var(--border-light);
}

/* ===== TOGGLES ===== */
.switchRow{
  display:flex;
  gap:14px;
  flex-wrap:wrap;
  align-items:center;
}

.switchWrap{
  display:flex;
  align-items:center;
  gap:6px;
  font-size:12px;
  font-weight:bold;
}

.switchLabelShort{min-width:20px;text-align:center}
.switchLabelLong{min-width:64px;text-align:center}

.switch{
  position:relative;
  width:50px;
  height:22px;
  cursor:pointer;
}

.switch input{
  position:absolute;
  inset:0;
  opacity:0;
  z-index:5;
}

.track,.knob{pointer-events:none}

.track{
  width:100%;
  height:100%;
  background:var(--track);
  border:2px solid;
  border-color:var(--border-light) var(--border-dark) var(--border-dark) var(--border-light);
}

.knob{
  position:absolute;
  top:2px;
  left:2px;
  width:16px;
  height:16px;
  background:var(--knob);
  border:2px solid;
  border-color:var(--border-light) var(--border-dark) var(--border-dark) var(--border-light);
  transition:left .12s linear;
}

.switch input:checked ~ .knob{ left:30px }

/* ===== LABELS / INPUTS ===== */
.label{
  font-size:13px;
  font-weight:bold;
  margin-bottom:6px;
}

small{
  font-size:12px;
  font-weight:bold;
}

input{
  width:100%;
  padding:12px;
  font-size:16px;
  border:2px solid;
  border-color:var(--border-dark) var(--border-light) var(--border-light) var(--border-dark);
  background:var(--field);
  font-family:"MS Sans Serif", Tahoma, sans-serif;
  text-align:center;
}

input:focus{
  outline:2px dotted #000;
  outline-offset:-6px;
}

/* ===== TIME ===== */
.timeRow{
  display:flex;
  gap:6px;
  align-items:center;
}

.timeBox{flex:1}

.colon{
  font-weight:bold;
  font-size:18px;
  padding-top:4px;
  user-select:none;
}

/* ===== DISTANCE DROPDOWN ===== */
.labelRow{
  display:flex;
  align-items:center;
  gap:6px;
  margin-bottom:6px;
}

.arrowBtn{
  width:18px;
  height:18px;
  background:var(--panel);
  border:2px solid;
  border-color:var(--border-light) var(--border-dark) var(--border-dark) var(--border-light);
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
  font-size:9px;
}

.dropdown{position:relative}

.dropdownMenu{
  position:absolute;
  top:22px;
  left:0;
  background:var(--panel);
  border:2px solid;
  border-color:var(--border-light) var(--border-dark) var(--border-dark) var(--border-light);
  box-shadow:1px 1px 0 #000;
  display:none;
  z-index:10;
  min-width:150px;
}

.dropdownMenu button{
  width:100%;
  padding:6px 10px;
  font-size:12px;
  font-weight:bold;
  background:var(--panel);
  border:none;
  text-align:left;
  cursor:pointer;
}
.dropdownMenu button:hover{background:#b0b0b0}

/* ===== OUTPUT ===== */
.output{
  padding:12px;
  background:#b8b8b8;
  border:2px solid;
  border-color:var(--border-light) var(--border-dark) var(--border-dark) var(--border-light);
  display:flex;
  justify-content:space-between;
  align-items:center;
}

.value{
  font-size:22px;
  font-weight:bold;
  background:#d0d0d0;
  padding:6px 10px;
  border:2px solid;
  border-color:var(--border-dark) var(--border-light) var(--border-light) var(--border-dark);
  min-width:190px;
  text-align:center;
}

button.clear{
  width:100%;
  padding:12px;
  margin-top:12px;
  font-weight:bold;
  background:var(--panel);
  border:2px solid;
  border-color:var(--border-light) var(--border-dark) var(--border-dark) var(--border-light);
  box-shadow:1px 1px 0 #000;
  cursor:pointer;
}
button.clear:active{transform:translate(1px,1px)}
</style>
</head>

<body>

<div class="win95">
  <div class="titlebar">Pace Calculator</div>
  <div class="content">

    <div class="group">
      <div class="label">Options</div>
      <div class="switchRow">
        <div class="switchWrap">
          <span class="switchLabelShort">km</span>
          <label class="switch">
            <input type="checkbox" id="unitToggle">
            <div class="track"></div>
            <div class="knob"></div>
          </label>
          <span class="switchLabelShort">mi</span>
        </div>

        <div class="switchWrap">
          <span class="switchLabelLong">Pace</span>
          <label class="switch">
            <input type="checkbox" id="treadToggle">
            <div class="track"></div>
            <div class="knob"></div>
          </label>
          <span class="switchLabelLong">Treadmill</span>
        </div>
      </div>
    </div>

    <div class="group">
      <div class="label">Time</div>
      <small>Hours : Minutes : Seconds</small>

      <div class="timeRow" style="margin-top:8px;">
        <div class="timeBox">
          <input type="text" id="hrs" maxlength="2" inputmode="numeric" pattern="[0-9]*">
        </div>
        <div class="colon">:</div>
        <div class="timeBox">
          <input type="text" id="min" maxlength="2" inputmode="numeric" pattern="[0-9]*">
        </div>
        <div class="colon">:</div>
        <div class="timeBox">
          <input type="text" id="sec" maxlength="2" inputmode="numeric" pattern="[0-9]*">
        </div>
      </div>
    </div>

    <div class="group">
      <div class="dropdown">
        <div class="labelRow">
          <div class="label">Distance</div>
          <div class="arrowBtn" id="arrow">â–¼</div>
        </div>

        <div class="dropdownMenu" id="menu">
          <button data-km="1">1 km</button>
          <button data-km="5">5 km</button>
          <button data-km="10">10 km</button>
          <button data-km="21.0975">Half Marathon</button>
          <button data-km="42.195">Marathon</button>
        </div>
      </div>

      <small id="distLabel">Kilometres</small>
      <input type="text" id="dist" inputmode="decimal">
    </div>

    <div class="output">
      <div id="resultLabel">Pace</div>
      <div class="value" id="result">--</div>
    </div>

    <button class="clear" id="clear">Clear</button>

  </div>
</div>

<script>
const hrs = document.getElementById("hrs");
const min = document.getElementById("min");
const sec = document.getElementById("sec");
const dist = document.getElementById("dist");

const unitToggle = document.getElementById("unitToggle");
const treadToggle = document.getElementById("treadToggle");

const result = document.getElementById("result");
const resultLabel = document.getElementById("resultLabel");
const distLabel = document.getElementById("distLabel");

const arrow = document.getElementById("arrow");
const menu = document.getElementById("menu");
const clearBtn = document.getElementById("clear");

/* ===== helpers ===== */
function buzz(ms=10){
  if (navigator.vibrate) navigator.vibrate(ms);
}
function two(el){
  el.value = el.value.replace(/\D/g,"").slice(0,2);
  if (el.value.length === 1) el.value = "0" + el.value;
}

/* ===== ENTER â†’ NEXT & CLEAR NEXT ===== */
const order = [hrs, min, sec, dist];
order.forEach((el,i)=>{
  el.addEventListener("keydown", e=>{
    if(e.key === "Enter"){
      e.preventDefault();
      if(el !== dist) two(el);
      const next = order[i+1];
      if(next){
        next.value = "";          // ðŸ‘ˆ clear the next box
        next.focus();
        buzz();
      }
    }
  });
});

/* ===== calc ===== */
function calc(){
  const h = parseInt(hrs.value)||0;
  const m = parseInt(min.value)||0;
  const s = parseInt(sec.value)||0;
  const d = parseFloat(dist.value);

  distLabel.textContent = unitToggle.checked ? "Miles" : "Kilometres";

  const totalSeconds = h*3600 + m*60 + s;
  if(!d || !totalSeconds){
    result.textContent="--";
    return;
  }

  if(treadToggle.checked){
    const speed = (d / totalSeconds) * 3600;
    resultLabel.textContent="Treadmill speed";
    result.textContent = `${speed.toFixed(1)} ${unitToggle.checked?"mph":"km/h"}`;
    return;
  }

  const paceSec = totalSeconds / d;
  const pm = Math.floor(paceSec / 60);
  const ps = Math.round(paceSec % 60);
  resultLabel.textContent="Pace";
  result.textContent = `${pm}:${String(ps).padStart(2,"0")} /${unitToggle.checked?"mi":"km"}`;
}

[hrs,min,sec,dist,unitToggle,treadToggle].forEach(el=>el.addEventListener("input",calc));

/* ===== dropdown ===== */
arrow.onclick = ()=> menu.style.display = menu.style.display==="block"?"none":"block";
document.addEventListener("click",e=>{
  if(!arrow.contains(e.target)&&!menu.contains(e.target)) menu.style.display="none";
});
menu.querySelectorAll("button").forEach(btn=>{
  btn.onclick=()=>{
    dist.value = btn.dataset.km;
    menu.style.display="none";
    calc();
  };
});

/* ===== clear ===== */
clearBtn.onclick=()=>{
  hrs.value=min.value=sec.value=dist.value="";
  result.textContent="--";
  hrs.focus();
};
</script>

</body>
</html>
