<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Random Chooser</title>

<style>
:root { color-scheme: dark; }

body{
  background:#000;
  color:#28ed00;
  margin:0;
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
}

.wrap{
  width:min(900px,92vw);
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:18px;
}

/* INPUT */
#inputStage{
  width:min(720px,92vw);
  display:flex;
  flex-direction:column;
  gap:12px;
}

textarea{
  width:100%;
  min-height:160px;
  padding:14px;
  font-size:16px;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.18);
  background:rgba(255,255,255,.06);
  color:#fff;
  resize:none;
  outline:none;
  box-sizing:border-box;

  scrollbar-width: thin;
  scrollbar-color: rgba(255,255,255,.35) rgba(255,255,255,.08);
}

textarea::-webkit-scrollbar{ width:10px; }
textarea::-webkit-scrollbar-track{
  background:rgba(255,255,255,.06);
  border-radius:10px;
}
textarea::-webkit-scrollbar-thumb{
  background:rgba(255,255,255,.25);
  border-radius:10px;
  border:2px solid transparent;
  background-clip:content-box;
}

button{
  padding:14px 18px;
  font-size:16px;
  font-weight:700;
  border-radius:12px;
  border:none;
  cursor:pointer;
}

.primary{ background:#2563eb; color:#fff; }
.secondary{ background:rgba(255,255,255,.12); color:#fff; }

.hidden{ display:none !important; }

/* RESULT */
#resultStage{
  width:100%;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:18px;
}

#editBtn{
  position:fixed;
  top:12px;
  left:12px;
  padding:10px 14px;
  border-radius:999px;
  z-index:10;
}

/* ✅ HOME BUTTON (theme-matched) */
#homeBtn{
  position:fixed;
  top:12px;
  left:12px;
  padding:10px 14px;
  border-radius:999px;
  z-index:11; /* above edit */
  background:rgba(255,255,255,.12);
  color:#28ed00;
  border:1px solid rgba(40,237,0,.35);
  backdrop-filter: blur(6px);
}
#homeBtn:hover{
  background:rgba(255,255,255,.18);
}

/* when result stage is visible, move Home to avoid overlap with Edit */
body.result-on #homeBtn{
  left:110px;
}

/* WIPE ANIMATION */
.word-container{
  position:relative;
  width:min(860px,92vw);
  min-height: clamp(90px,18vw,180px);
  display:flex;
  align-items:center;
  justify-content:center;
}

.half{
  position:absolute;
  font-size:clamp(32px,7vw,88px);
  font-weight:900;
  color: #28ed00;
  text-align:center;
  white-space:normal;
  word-break:break-word;
  line-height:1.2;
  padding:0.2em;
  max-width:100%;
}

/* start hidden */
.left{ clip-path: inset(0 100% 0 0); }
.right{ clip-path: inset(0 0 0 100%); }

/* SLOWED animation */
.animate .left{
  animation:wipeLeft 5s cubic-bezier(.45,0,.55,1) forwards;
}
.animate .right{
  animation:wipeRight 5s cubic-bezier(.45,0,.55,1) forwards; 
}

@keyframes wipeLeft{
  to{ clip-path: inset(0 50% 0 0); }
}
@keyframes wipeRight{
  to{ clip-path: inset(0 0 0 50%); }
}
</style>
</head>
<body>

<!-- ✅ HOME NAV -->
<button id="homeBtn" type="button" onclick="location.href='index'">Home</button>

<div class="wrap">

<!-- INPUT -->
<section id="inputStage">
  <textarea id="options" placeholder="Enter options (one per line or comma-separated)"></textarea>
  <button id="submitBtn" class="primary">Submit</button>
</section>

<!-- RESULT -->
<section id="resultStage" class="hidden">
  <button id="editBtn" class="secondary">Edit list</button>

  <div id="wrapper">
    <div class="word-container">
      <div id="leftHalf" class="half left"></div>
      <div id="rightHalf" class="half right"></div>
    </div>
  </div>

  <button id="chooseBtn" class="secondary">Choose Random</button>
</section>

</div>

<script>
const MAX_CHARS = 26;

const inputStage = document.getElementById("inputStage");
const resultStage = document.getElementById("resultStage");
const optionsEl = document.getElementById("options");

const submitBtn = document.getElementById("submitBtn");
const chooseBtn = document.getElementById("chooseBtn");
const editBtn = document.getElementById("editBtn");

const wrapper = document.getElementById("wrapper");
const leftHalf = document.getElementById("leftHalf");
const rightHalf = document.getElementById("rightHalf");

let options = [];

function parseOptions(raw){
  const parts = raw.split(/[\n,]+/)
    .map(s => s.trim().slice(0, MAX_CHARS))
    .filter(Boolean);

  return [...new Set(parts.map(p => p.toLowerCase()))]
    .map(k => parts.find(p => p.toLowerCase() === k));
}

function randPick(arr){
  if (crypto?.getRandomValues){
    const u = new Uint32Array(1);
    crypto.getRandomValues(u);
    return arr[u[0] % arr.length];
  }
  return arr[Math.floor(Math.random() * arr.length)];
}

function clearResult(){
  leftHalf.textContent = "";
  rightHalf.textContent = "";
  wrapper.classList.remove("animate");
}

function reveal(text){
  leftHalf.textContent = text;
  rightHalf.textContent = text;

  wrapper.classList.remove("animate");
  void wrapper.offsetWidth;
  wrapper.classList.add("animate");
}

function setResultMode(on){
  document.body.classList.toggle("result-on", !!on);
}

function submitList(){
  options = parseOptions(optionsEl.value);
  if (!options.length) return alert("Add at least one option.");

  inputStage.classList.add("hidden");
  resultStage.classList.remove("hidden");
  clearResult();
  optionsEl.blur();
  setResultMode(true);
}

submitBtn.onclick = submitList;

optionsEl.addEventListener("keydown", e=>{
  if(e.key==="Enter" && !e.shiftKey){
    e.preventDefault();
    submitList();
  }
});

chooseBtn.onclick = ()=> reveal(randPick(options));

editBtn.onclick = ()=>{
  resultStage.classList.add("hidden");
  inputStage.classList.remove("hidden");
  clearResult();
  optionsEl.focus();
  setResultMode(false);
};

window.onload = ()=>{
  optionsEl.focus();
  setResultMode(false);
};
</script>

</body>
</html>
