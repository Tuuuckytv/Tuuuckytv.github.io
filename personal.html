<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Personal</title>
<link rel="icon" href="pipe.png" type="image/png" />

<style>
@font-face{
  font-family:"Dogica";
  src:url("dogica.ttf") format("truetype");
  font-weight:normal;
  font-style:normal;
  font-display:swap;
}

:root{
  --bg:#0a0b10;
  --text:#f2f6ff;
  --muted:#aeb7c9;
  --neon:#09f911;
  --shadow:0 18px 60px rgba(0,0,0,.45);
  --cols:1;
  --r:18px;
  --ease:cubic-bezier(.2,.8,.2,1);
  --font:"Dogica", monospace;

  /* VHS knobs (toned down) */
  --vhs-green: rgba(40,255,120,.06);
  --scanline-opacity: .18;
  --scanline-gap: 4px;
  --scanline-thickness: 1px;
  --scanline-speed: 12s;
  --band-opacity: .08;
  --band-speed: 6.5s;
  --noise-opacity: .04;
}

*{
  box-sizing:border-box;
  font-family:var(--font);
}

html,body{ height:100%; }

body{
  margin:0;
  min-height:100svh;
  background:var(--bg);
  color:var(--text);
  display:flex;
  justify-content:center;
  align-items:center;
  padding:22px 14px;
  overflow-x:hidden;
  line-height:1.4;
  transition: opacity 3.5s cubic-bezier(.2,.8,.2,1);

}

/* Hide underlying UI instantly when navigating (prevents “flash back”) */
body.is-navigating .wrap,
body.is-navigating .bg,
body.is-navigating .vhs-tint,
body.is-navigating .vhs-lines,
body.is-navigating .vhs-band,
body.is-navigating .vhs-noise{
  opacity:0 !important;
}

/* background */
.bg{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:-3;
}
.bg::before{
  content:"";
  position:absolute;
  inset:-20%;
  background:repeating-linear-gradient(
    135deg,
    rgba(255,255,255,.04) 0,
    rgba(255,255,255,.04) 1px,
    transparent 1px,
    transparent 14px
  );
  opacity:.45;
  animation:gridDrift 18s linear infinite;
}
.bg::after{
  content:"";
  position:absolute;
  inset:-30%;
  background:
    radial-gradient(800px 420px at 20% 20%, rgba(9,249,17,.14), transparent 60%),
    radial-gradient(700px 460px at 80% 30%, rgba(9,249,17,.10), transparent 62%);
  animation:glowPulse 6.5s var(--ease) infinite alternate;
}
@keyframes gridDrift{ to{ transform:translate(2%,2%); } }
@keyframes glowPulse{ to{ transform:scale(1.04); opacity:1; } }

/* =========================
   VHS OVERLAY (full-screen + upward motion)
   ========================= */
.vhs-tint,
.vhs-lines,
.vhs-band,
.vhs-noise{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:9998;
}

/* gentle green-ish tint */
.vhs-tint{
  background:var(--vhs-green);
  mix-blend-mode:soft-light;
  opacity:.7;
}

/* scanlines that MOVE UP */
.vhs-lines{
  background:
    repeating-linear-gradient(
      to bottom,
      rgba(255,255,255,var(--scanline-opacity)) 0px,
      rgba(255,255,255,var(--scanline-opacity)) var(--scanline-thickness),
      rgba(0,0,0,0) var(--scanline-thickness),
      rgba(0,0,0,0) var(--scanline-gap)
    );
  mix-blend-mode:overlay;
  animation:scanUp var(--scanline-speed) linear infinite;
  will-change:transform;
  opacity:.8;
}

/* rolling band drifting upward */
.vhs-band{
  background:
    linear-gradient(
      to bottom,
      rgba(0,0,0,0) 0%,
      rgba(255,255,255,var(--band-opacity)) 45%,
      rgba(255,255,255,0) 55%,
      rgba(0,0,0,0) 100%
    );
  mix-blend-mode:screen;
  animation:bandUp var(--band-speed) linear infinite;
  transform:translateY(110%);
  will-change:transform;
  opacity:.85;
}

/* subtle noise */
.vhs-noise{
  opacity:var(--noise-opacity);
  background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='220' height='220'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.85' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='220' height='220' filter='url(%23n)' opacity='.4'/%3E%3C/svg%3E");
  background-size:180px 180px;
  mix-blend-mode:overlay;
  animation:noiseJitter 120ms steps(2) infinite;
  will-change:transform;
}

@keyframes scanUp{
  from { transform:translateY(0); }
  to   { transform:translateY(-140px); }
}
@keyframes bandUp{
  from { transform:translateY(120%); }
  to   { transform:translateY(-120%); }
}
@keyframes noiseJitter{
  0%   { transform:translate(0,0); }
  25%  { transform:translate(-1px,1px); }
  50%  { transform:translate(1px,-1px); }
  75%  { transform:translate(-1px,0); }
  100% { transform:translate(0,0); }
}

/* layout */
.wrap{
  width:100%;
  max-width:960px;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:18px;
}

/* header */
header{
  text-align:center;
  opacity:0;
  transform:translateY(8px);
  animation:enter .65s var(--ease) forwards;
}

h1{
  margin:0;
  font-size:clamp(34px,5.2vw,64px);
  font-weight:400;
  letter-spacing:.38em;
  text-transform:uppercase;
}

.sub{
  margin-top:14px;
  color:rgba(242,246,255,.78);
  font-size:12px;
  letter-spacing:.22em;
  text-transform:uppercase;
}

/* card */
.card{
  width:100%;
  border-radius:var(--r);
  background:rgba(255,255,255,.03);
  box-shadow:var(--shadow);
  border:1px solid rgba(9,249,17,.28);
  opacity:0;
  transform:translateY(10px);
  animation:enter .75s var(--ease) .12s forwards;
}
.card-inner{ padding:16px; }

.deck{
  display:grid;
  grid-template-columns:repeat(var(--cols),minmax(0,1fr));
  gap:12px;
}

/* buttons */
.btn{
  position:relative;
  background:rgba(255,255,255,.02);
  border:1px solid rgba(9,249,17,.9);
  border-radius:16px;
  padding:18px 16px;
  min-height:96px;
  cursor:pointer;
  text-align:left;
  color:var(--text);
  box-shadow:0 10px 24px rgba(0,0,0,.3);
  overflow:hidden;
  transition:
    transform .22s var(--ease),
    box-shadow .22s var(--ease),
    background .22s var(--ease);
}
.btn::after{
  content:"";
  position:absolute;
  inset:8px;
  border-radius:12px;
  border:1px solid rgba(9,249,17,.55);
  opacity:.35;
}
.btn::before{
  content:"";
  position:absolute;
  left:16px;
  right:16px;
  bottom:14px;
  height:1px;
  background:linear-gradient(
    90deg,
    transparent,
    rgba(9,249,17,.9),
    transparent
  );
  transform:scaleX(0);
  transform-origin:left;
  transition:transform .35s var(--ease);
}
.btn-content{ transition:transform .22s var(--ease); }
.btn:hover{
  transform:translateY(-4px);
  background:rgba(255,255,255,.04);
}
.btn:hover .btn-content{ transform:translateY(-3px); }
.btn:hover::before{ transform:scaleX(1); }

.btn-name{
  font-size:14px;
  text-transform:uppercase;
}
.btn-desc{
  margin-top:10px;
  color:var(--muted);
  font-size:11px;
  letter-spacing:.12em;
  line-height:1.2;
}

/* glitch title */
.glitch{
  position:relative;
  display:inline-block;
  animation:glitch 1s linear infinite;
  transform:translateZ(0);
  image-rendering:pixelated;
}
.glitch::before,
.glitch::after{
  content:attr(data-text);
  position:absolute;
  left:0;
  top:0;
  width:100%;
}
.glitch::before{
  clip-path:polygon(0 0,100% 0,100% 33%,0 33%);
  animation:glitchTop 1s linear infinite;
}
.glitch::after{
  clip-path:polygon(0 67%,100% 67%,100% 100%,0 100%);
  animation:glitchBottom 1.5s linear infinite;
}

@keyframes glitch{
  2%,64%{ transform:translate(2px,0); }
  4%,60%{ transform:translate(-2px,0); }
  62%{ transform:translate(0,0) skew(5deg); }
}
@keyframes glitchTop{
  2%,64%{ transform:translate(2px,-2px); }
  4%,60%{ transform:translate(-2px,2px); }
  62%{ transform:translate(12px,-1px) skew(-13deg); }
}
@keyframes glitchBottom{
  2%,64%{ transform:translate(-2px,0); }
  4%,60%{ transform:translate(-2px,0); }
  62%{ transform:translate(-18px,5px) skew(21deg); }
}

/* glitch overlay */
#glitchOverlay{
  position:fixed;
  inset:0;
  z-index:10000;
  background:#000;
  display:flex;
  align-items:center;
  justify-content:center;
  opacity:0;
  visibility:hidden;
  pointer-events:none;
  transition:none;
}
#glitchOverlay.active{
  opacity:1;
  visibility:visible;
  pointer-events:none;
}
#glitchVideo{
  width:100%;
  height:100%;
  object-fit:cover;
}

@keyframes enter{
  to{ opacity:1; transform:translateY(0); }
}

.footer-link{
  position:fixed;
  right:14px;
  bottom:12px;
  z-index:9999; /* above VHS overlay (9998) */
  font-size:11px;
  letter-spacing:.18em;
  text-transform:uppercase;
  color:rgba(242,246,255,.65);
  text-decoration:none;
  padding:8px 10px;
  border-radius:12px;
  border:1px solid rgba(9,249,17,.35);
  background:rgba(0,0,0,.18);
  box-shadow:0 10px 22px rgba(0,0,0,.25);
  transition:transform .22s var(--ease), background .22s var(--ease), border-color .22s var(--ease), color .22s var(--ease);
}
.footer-link:hover{
  transform:translateY(-2px);
  background:rgba(0,0,0,.28);
  border-color:rgba(9,249,17,.7);
  color:rgba(242,246,255,.9);
}
.footer-link:focus-visible{
  outline:2px solid rgba(9,249,17,.8);
  outline-offset:3px;
}

/* reduced motion */
@media (prefers-reduced-motion: reduce){
  .vhs-tint,.vhs-lines,.vhs-band,.vhs-noise, *{ animation:none !important; }
}
</style>
</head>

<body>
<div class="bg"></div>

<!-- VHS overlays -->
<div class="vhs-tint" aria-hidden="true"></div>
<div class="vhs-lines" aria-hidden="true"></div>
<div class="vhs-band" aria-hidden="true"></div>
<div class="vhs-noise" aria-hidden="true"></div>

<!-- Glitch overlay -->
<div id="glitchOverlay" aria-hidden="true">
  <video id="glitchVideo" src="glitch.mp4" preload="auto" playsinline muted></video>
</div>

<div class="wrap">
  <header>
    <h1 class="glitch" data-text="Kyle">Kyle</h1>
    <p class="sub">Hello motherfucker.</p>
  </header>

  <div class="card">
    <div class="card-inner">
      <div class="deck" id="buttonDeck"></div>
    </div>
  </div>
</div>

<!-- === ADDED: footer link === -->
<a class="footer-link" href="https://kyletuck.com" target="_blank" rel="noopener noreferrer">kyletuck.com</a>

<script>
const GLITCH_DURATION_MS = 700;

const pages=[
  {name:"Timelapse Calculator",path:"timelapse",desc:"Calculate how long a timelapse will be."},
  {name:"Pace Calculator",path:"pacecalc",desc:"Calculate your pace."},
  {name:"Randomiser",path:"chooser",desc:"Simple randomiser."},
  {name:"Deck Generator",path:"sk8",desc:"Add a graphic to my board."}
];

const deck = document.getElementById("buttonDeck");
document.documentElement.style.setProperty("--cols",Math.ceil(Math.sqrt(pages.length)));

const overlay = document.getElementById("glitchOverlay");
const video = document.getElementById("glitchVideo");
let navigating = false;

function resetOverlay(){
  // only used when coming BACK to this page
  document.body.classList.remove("is-navigating");
  overlay.classList.remove("active");
  try{ video.pause(); video.currentTime = 0; }catch(e){}
  navigating = false;
}

/* If you go back, clear overlay state */
window.addEventListener("pageshow", resetOverlay);

async function playGlitchThenGo(to){
  if(navigating) return;
  navigating = true;

  // Hide the page immediately so it can't flash back
  document.body.classList.add("is-navigating");

  // Keep overlay on top until navigation completes
  overlay.classList.add("active");

  try{
    video.currentTime = 0;
    await video.play();
  }catch(e){
    // autoplay might fail; we still navigate after delay
  }

  // Navigate WITHOUT removing the overlay (prevents flash)
  setTimeout(()=>{
    window.location.assign(to);
  }, GLITCH_DURATION_MS);
}

pages.forEach((p,i)=>{
  const b=document.createElement("button");
  b.type = "button";
  b.className="btn";
  b.innerHTML=`
    <div class="btn-content">
      <div class="btn-name">${p.name}</div>
      <div class="btn-desc">${p.desc}</div>
    </div>`;
  b.onclick=()=>playGlitchThenGo(p.path);
  deck.appendChild(b);
});
</script>
</body>
</html>
